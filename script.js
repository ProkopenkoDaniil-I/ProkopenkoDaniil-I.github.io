"use strict";function L(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var n,o="https://academy.directlinedev.com";function r(){var e=document.querySelector(".menu__sign-in-btn_js"),n=document.querySelector(".menu__register-btn_js"),t=document.querySelector(".menu__my-profile-btn_js");localStorage.getItem("token")?(e.classList.add("header__menu-item_hidden"),n.classList.add("header__menu-item_hidden"),t.classList.remove("header__menu-item_hidden")):(e.classList.remove("header__menu-item_hidden"),n.classList.remove("header__menu-item_hidden"),t.classList.add("header__menu-item_hidden"))}function e(e,n,t,i,o,s){var e=0<arguments.length&&void 0!==e?e:null,n=1<arguments.length?n:void 0,t=2<arguments.length?t:void 0,r=3<arguments.length?i:void 0,o=4<arguments.length?o:void 0,a=5<arguments.length?s:void 0,l=document.querySelector(".".concat(n)),d=document.querySelector(".".concat(o)),t=document.querySelector(".".concat(t)),c=l.querySelector("input");function u(){p(l,r,d,a)}l&&t&&(e&&document.querySelector(".".concat(e)).addEventListener("click",function(){l.classList.add(r),c&&c.focus();d&&d.classList.add(a)}),t.addEventListener("click",u),window.addEventListener("keydown",function(e){27===e.keyCode&&l.classList.contains(r)&&u()}))}function p(e,n,t,i){t=2<arguments.length&&void 0!==t&&t,i=3<arguments.length?i:void 0;e.classList.remove(n),t&&t.classList.remove(i)}function v(e,n){if(!e)return!1;var t=!0;return n.forEach(function(e){!function(e){e.classList.remove("text-input-field_invalid"),e.nextElementSibling.classList.add("hidden"),e.classList.add("text-input-field_valid"),e.nextElementSibling.nextElementSibling.classList.contains("hidden")&&e.nextElementSibling.nextElementSibling.classList.remove("hidden");e.nextElementSibling.nextElementSibling.nextElementSibling&&e.nextElementSibling.nextElementSibling.nextElementSibling.remove()}(e),e.isValid()||(t=!1,s(e))}),t}function _(e,n){if(!e)return!1;var t=!0;return(e=n).nextElementSibling.classList.contains("checkbox-input-error")&&e.nextElementSibling.classList.remove("checkbox-input-error"),n.isValid()||(t=!1,(n=n).nextElementSibling.classList.contains("checkbox-input-error")||n.nextElementSibling.classList.add("checkbox-input-error")),t}function s(e){e.classList.add("text-input-field_invalid"),e.nextElementSibling.classList.remove("hidden"),e.nextElementSibling.nextElementSibling.classList.contains("hidden")||e.nextElementSibling.nextElementSibling.classList.add("hidden"),e.classList.contains("text-input-field_valid")&&e.classList.remove("text-input-field_valid")}function g(e){return e.match(/^[0-9a-z-\.]+\@[0-9a-z-]{2,}\.[a-z]{2,}$/i)}function h(e){return 5<e.length}function b(e){var n=e.url,t=e.method,i=e.headers,e=e.body;return fetch(o+n+"?v=1.0.0",{method:void 0===t?"GET":t,headers:i,body:void 0===e?null:e})}function S(t,i){Object.keys(t).length&&Object.keys(t).forEach(function(e){var n=t[e];!function(e,n){s(e);var t=document.createElement("div");t.classList.add("text-input-error"),t.innerText=n,e.nextElementSibling.classList.contains("hidden")||e.nextElementSibling.classList.add("hidden");e.nextElementSibling.nextElementSibling.classList.contains("hidden")||e.nextElementSibling.nextElementSibling.classList.add("hidden");e.nextElementSibling.nextElementSibling.nextElementSibling?e.nextElementSibling.nextElementSibling.nextElementSibling.innerText=n:e.nextElementSibling.nextElementSibling.insertAdjacentElement("afterend",t)}(i.elements[e],n)})}function E(e,n,t){n=1<arguments.length&&void 0!==n?n:null,t=2<arguments.length&&void 0!==t?t:null;e.forEach(function(e){!function(e){e.classList.contains("text-input-field_invalid")&&e.classList.remove("text-input-field_invalid");e.classList.contains("text-input-field_valid")&&e.classList.remove("text-input-field_valid");e.nextElementSibling&&e.nextElementSibling.nextElementSibling&&!e.nextElementSibling.nextElementSibling.classList.contains("hidden")&&e.nextElementSibling.nextElementSibling.classList.add("hidden");e.nextElementSibling&&!e.nextElementSibling.classList.contains("hidden")&&e.nextElementSibling.classList.add("hidden")}(e),e.value=""}),n&&((e=n).nextElementSibling.classList.contains("checkbox-input-error")&&e.nextElementSibling.classList.remove("checkbox-input-error"),n.checked=!1),t&&y(n,t)}function y(e,n){e.checked&&n.hasAttribute("disabled")&&n.removeAttribute("disabled"),e.checked||n.hasAttribute("disabled")||n.setAttribute("disabled","")}document.querySelector(".".concat("menu__home-btn_js")).classList.add("header__menu-item_current"),r(),e("menu__sign-in-btn_js","sign-in-form_js","sign-in-form__close-btn_js","popup-form_open","sign-in-overlay_js","popup-overlay_open"),e("menu__register-btn_js","register-form_js","register-form__close-btn_js","popup-form_open","register-overlay_js","popup-overlay_open"),e("send-message-btn_js","send-message-form_js","send-message-form__close-btn_js","popup-form_open","send-message-overlay_js","popup-overlay_open"),e("mobile__menu-burger_js","popup-menu_js","header__popup-menu-close-btn_js","popup-menu_open"),(n=document.querySelector(".button-to-top_js"))&&(n.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",function(e){1500<window.pageYOffset&&n.classList.remove("button-to-top_hidden"),window.pageYOffset<=1500&&n.classList.add("button-to-top_hidden")})),function(){var e=document.forms.signIn,n=e.elements.email,t=e.elements.password;n.isValid=function(){return g(n.value)},t.isValid=function(){return h(t.value)};var i=[n,t],o=!1;e.addEventListener("submit",function(e){e.preventDefault(),v(o=!0,i)&&function(){var n=document.querySelector(".sign-in-form_js"),t=document.querySelector(".preloader__loader_js"),i=document.forms.signIn,o=document.querySelector(".sign-in-overlay_js");t.classList.remove("preloader_hidden");var e={};e.email=i.email.value,e.password=i.password.value;var s=[i.email,i.password];b({method:"POST",url:"/api/users/login",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),E(s),p(n,"popup-form_open",o,"popup-overlay_open"),t.classList.add("preloader_hidden"),r(),setTimeout(function(){location.pathname="/pages/profile"},2e3)}).catch(function(e){e._message&&S({email:e._message},i)}).finally(function(){t.classList.add("preloader_hidden")})}()}),i.forEach(function(e){e.addEventListener("input",function(){v(o,i)})})}(),function(){var e=document.forms.register,n=e.elements.email,t=e.elements.name,i=e.elements.surname,o=e.elements.password,s=e.elements.passwordRepeat,r=e.elements.location,a=e.elements.age,l=e.elements.confirm,d=e.elements.submitButton;n.isValid=function(){return g(n.value)},t.isValid=function(){return!!t.value},i.isValid=function(){return!!i.value},o.isValid=function(){return h(o.value)},s.isValid=function(){return e=o.value,n=s.value,h(e)&&e===n;var e,n},r.isValid=function(){return!!r.value},a.isValid=function(){return e=a.value,!isNaN(e)&&null!==e&&0<e;var e},l.isValid=function(){return l.checked};var c=[n,t,i,o,s,r,a],u=!1,m=!1,f=!1;e.addEventListener("submit",function(e){e.preventDefault(),u=v(f=!0,c),m=_(f,l),u&&m&&function(){var n=document.querySelector(".register-form_js"),t=document.querySelector(".preloader__loader_js"),i=document.forms.register,o=document.querySelector(".register-overlay_js"),s=i.elements.submitButton,e={};e.email=i.email.value,e.name=i.name.value,e.surname=i.surname.value,e.password=i.password.value,e.location=i.location.value,e.age=+i.age.value;var r=[i.email,i.name,i.surname,i.password,i.passwordRepeat,i.location,i.age];t.classList.remove("preloader_hidden"),b({method:"POST",url:"/api/users",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;E(r,i.confirm,s),p(n,"popup-form_open",o,"popup-overlay_open"),alert("Пользователь с id ".concat(e.data.id," & email ").concat(e.data.email," создан!")),t.classList.add("preloader_hidden")}).catch(function(e){S(e.errors,i)}).finally(function(){t.classList.add("preloader_hidden")})}()}),c.forEach(function(e){e.addEventListener("input",function(){u=v(f,c)})}),l.addEventListener("input",function(){m=_(f,l)}),l.addEventListener("input",function(){y(l,d)})}(),function(){var e=document.forms.sendMessage,n=e.elements.to,t=e.elements.name,i=e.elements.subject,o=e.elements.phone,s=e.elements.confirm,r=e.elements.submitButton;n.isValid=function(){return g(n.value)},t.isValid=function(){return!!t.value},i.isValid=function(){return!!i.value},o.isValid=function(){return o.value.match(/^(\s*)?(\+)?([-_():=+]?\d[- _():=+]?){10,14}(\s*)?$/)},s.isValid=function(){return s.checked};var a=[n,t,i,o],l=!1,d=!1,c=!1;e.addEventListener("submit",function(e){e.preventDefault(),l=v(c=!0,a),d=_(c,s),l&&d&&function(){var n=document.querySelector(".send-message-form_js"),t=document.querySelector(".preloader__loader_js"),i=document.forms.sendMessage,o=document.querySelector(".send-message-overlay_js"),s=i.elements.submitButton,e=i.name.value,r=i.subject.value,a=i.phone.value,l=i.message.value,d={};d.to=i.to.value,d.body=JSON.stringify({myName:e,mySubject:r,myPhone:a,myMessage:l});var c=[i.to,i.name,i.subject,i.phone,i.message];t.classList.remove("preloader_hidden"),b({method:"POST",url:"/api/emails",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;E(c,i.confirm,s),p(n,"popup-form_open",o,"popup-overlay_open"),t.classList.add("preloader_hidden"),alert("Ваше сообщение успешно отправлено!")}).catch(function(e){e.errors&&S(e.errors,i)}).finally(function(){t.classList.add("preloader_hidden")})}()}),a.forEach(function(e){e.addEventListener("input",function(){l=v(c,a)})}),s.addEventListener("input",function(){d=_(c,s)}),s.addEventListener("input",function(){y(s,r)})}();(function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{initialActiveIndex:0},e=document.querySelector(e),t=e.querySelector(".slider__wrapper_js"),i=t.querySelector(".slider__inner-wrapper_js"),o=L(t.querySelectorAll(".slider__slide_js")),s=e.querySelector(".slider-bottom-panel__button_back_js"),r=e.querySelector(".slider-bottom-panel__button_next_js"),a=e.querySelector(".slider-bottom-panel__pagination_js"),l=o.length,d=[],c=0,u=n.initialActiveIndex,m=500,f=null,p=0,v=0,_=!1,g=!1;function h(e){_&&(_=!1,p-e.clientX>.2*c?b():e.clientX-p>.2*c&&S())}function b(){E(u+1)}function S(){E(u-1)}function E(e,n,t){n=!(1<arguments.length&&void 0!==n)||n,t=2<arguments.length&&void 0!==t?t:0;e<0||e>=o.length||(n&&(clearTimeout(f),i.style.transition="transform ".concat(m,"ms"),f=setTimeout(function(){i.style.transition=""},m)),s.removeAttribute("disabled"),r.removeAttribute("disabled"),0===e&&s.setAttribute("disabled",""),e===o.length-1&&r.setAttribute("disabled",""),n=c*(o.length-1),t=c*e+t,i.style.transform="translateX(-".concat(n<t?n:t,"px)"),d[u].classList.remove("pagination-panel__dot_active"),d[e].classList.add("pagination-panel__dot_active"),localStorage.setItem("activeSlide",e),u=e)}function y(){c=t.offsetWidth,o.forEach(function(e){e.style.width="".concat(c,"px")})}t.addEventListener("touchstart",function(e){g=!0;e=e.touches[0];p=e.clientX,v=e.clientX}),t.addEventListener("touchmove",function(e){g&&(e=e.touches[0],v=e.clientX,E(u,!1,.5*(p-v)))}),t.addEventListener("touchend",function(e){g&&(g=!1,.2*c<p-v?b():.2*c<v-p?S():E(u))}),t.addEventListener("mousedown",function(e){_=!0,p=e.clientX}),t.addEventListener("mouseup",h),t.addEventListener("mouseout",h),y(),function(){for(var e=0;e<l;e++){var n=function(e){var n=document.createElement("button");n.classList.add("pagination-panel__dot"),e===u&&n.classList.add("pagination-panel__dot_active");return n.addEventListener("click",function(){E(e)}),n}(e);d.push(n),a.insertAdjacentElement("beforeend",n)}}(),E(u,!1),window.addEventListener("resize",function(){y(),E(u,!1)}),r.addEventListener("click",function(){b()}),s.addEventListener("click",function(){S()})})(".slider_js",{initialActiveIndex:+localStorage.getItem("activeSlide")||0}),new Swiper(".swiper",{direction:"horizontal",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});